from first_thing import *
evolve_array_iii_default = [0,2,3,3,5,6,6,8,9,9,11,12,12,14,15,15,17,18,18,20,20,22,22,24,24,26,26,28,28,30,31,31,33,34,34,36,36,38,38,40,40,42,169,44,45,45,47,47,49,49,51,51,53,53,55,55,57,57,59,59,61,62,62,64,65,65,67,68,68,70,71,71,73,73,75,76,76,78,78,80,80,82,82,83,85,85,87,87,89,89,91,91,93,94,94,208,97,97,99,99,101,101,103,103,105,105,106,107,108,110,110,112,112,242,114,115,117,230,119,119,121,121,122,123,124,125,162,127,128,130,130,131,132,134,134,135,136,137,139,139,141,141,142,143,144,145,146,148,149,149,150,151,153,154,154,156,157,157,159,160,160,162,162,164,164,166,166,168,168,169,171,171,25,35,39,175,176,178,178,180,181,181,182,184,184,185,186,188,189,189,190,192,192,193,195,195,196,197,198,199,200,201,202,203,205,205,206,207,208,210,210,211,212,213,214,215,217,217,219,219,220,221,222,224,224,225,226,227,229,229,230,232,232,233,234,235,237,237,124,125,126,241,242,243,244,245,247,248,248,249,250,251,252,253,254,255,256,257,258,259,260,261,262,263,264,265,266,267,268,269,270,271,272,273,274,275,276,278,279,279,281,282,282,284,285,285,287,287,289,289,291,292,292,294,294,296,297,297,299,300,300,302,302,303,305,305,307,307,308,310,310,312,312,314,314,316,316,317,319,319,313,321,322,324,324,325,327,327,329,329,331,331,333,334,334,336,336,338,338,340,340,342,343,343,345,345,347,347,348,349,12,352,352,353,354,355,357,357,359,359,202,362,362,363,365,366,366,368,368,369,371,372,372,374,374,375,376,378,378,379,380,381,383,384,384,385,386,387,389,389,391,391,393,394,394,396,397,397,399,400,400]

evolve_level_barrier_array_iii_default = [0,16,32,0,16,36,0,16,36,0,7,10,0,7,10,0,18,36,0,20,0,20,0,22,0,100,0,22,0,16,21,0,16,21,0,5,0,50,0,5,0,22,27,21,26,0,24,0,31,0,26,0,28,0,33,0,28,0,5,0,25,30,0,16,21,0,28,33,0,21,26,0,30,0,25,30,0,40,0,37,0,30,35,0,31,0,34,0,38,0,5,0,25,30,0,5,26,0,28,0,30,0,5,0,28,0,0,0,5,35,0,42,47,52,57,0,32,37,33,0,5,0,0,0,0,5,10,0,0,20,0,0,0,0,0,0,0,30,40,0,40,0,0,0,0,0,0,30,55,0,0,0,16,32,0,14,36,0,18,30,0,15,0,20,0,18,0,22,0,0,27,0,10,10,10,10,30,25,0,15,30,0,0,18,0,0,0,18,27,0,40,5,0,5,40,0,0,0,40,0,40,0,0,0,31,0,0,40,0,23,0,0,0,0,0,30,30,0,38,0,33,38,0,25,0,0,0,0,24,0,0,25,0,40,0,0,20,0,30,30,30,0,0,0,0,0,30,55,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,36,0,16,36,0,16,36,0,18,0,20,0,7,10,0,10,0,14,19,0,14,19,0,20,0,0,22,0,23,0,0,25,0,22,0,40,0,20,0,0,36,0,30,0,0,30,0,0,30,0,5,0,30,0,35,45,0,24,0,26,0,33,0,32,44,0,32,0,42,0,0,0,15,32,0,0,0,0,37,0,35,0,15,37,42,36,18,36,0,26,0,0,20,40,0,5,0,0,0,37,0,0,0,0,32,42,0,0,0,0,40,0,40,0,20,30,0,30,50,0,20,45,0]

evolve_array_iii_gaia = [0,2,3,3,5,6,6,8,9,9,11,12,12,14,15,15,17,18,18,20,20,22,22,24,24,26,26,28,28,30,31,31,33,34,34,36,36,38,38,40,40,42,169,44,45,45,47,47,49,49,51,51,53,53,55,55,57,57,59,59,61,62,62,64,65,65,67,68,68,70,71,71,73,73,75,76,76,78,78,80,80,82,515,83,85,85,87,87,89,89,91,91,93,94,94,280,97,97,99,99,101,101,103,103,105,105,106,107,516,110,110,112,517,242,518,115,117,230,119,119,121,121,122,212,124,519,520,127,128,130,130,131,132,134,134,135,136,233,139,139,141,141,142,143,144,145,146,148,149,149,150,151,153,154,154,156,157,157,159,160,160,162,162,164,164,166,166,168,168,169,171,171,26,36,40,176,521,178,178,180,181,181,182,184,184,185,186,188,189,189,477,192,192,522,195,195,196,197,483,199,482,201,202,203,205,205,206,525,208,210,210,211,212,213,214,514,217,217,219,219,221,526,222,224,224,225,226,227,229,229,230,232,232,527,234,235,237,237,124,125,126,241,242,243,244,245,247,248,248,249,250,251,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,278,279,279,281,282,282,284,285,285,287,287,289,289,291,292,292,294,294,296,297,297,299,300,300,302,302,303,305,305,307,307,308,310,310,312,312,314,314,316,316,317,319,319,529,321,322,324,324,325,327,327,329,329,331,331,333,334,334,336,336,338,338,340,340,342,343,343,345,345,347,347,348,349,184,352,352,353,354,355,357,357,359,359,361,362,530,460,365,366,366,368,368,369,371,372,372,374,374,375,376,378,378,379,380,381,383,384,384,385,386,387,389,389,391,391,393,394,394,396,397,397,399,400,400,401,402,403,404,405,406,407,408,409,410,411,412,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,201,441,442,442,444,445,445,447,448,448,450,451,451,453,453,455,455,457,458,458,460,460,462,462,464,464,466,466,467,469,469,470,472,472,474,474,476,476,477,479,479,481,481,482,483,485,485,411,488,488,490,490,185,122,242,494,495,497,498,498,143,501,501,503,503,505,505,507,507,508,510,510,226,513,513,514,515,516,517,518,519,520,521,522,523,524,525,526,527,528,529,530,531,532,533,534,535,536,537,538,539,540,541,542,543,544,546,546,547,549,550,550,552,553,553,555,556,556,558,558,560,561,561,563,563,565,565,567,567,569,569,571,571,573,574,574,576,576,578,579,579,581,581,583,583,584,586,587,587,589,590,590,591,592,594,595,595,597,598,598,600,600,602,602,603,605,606,606,608,609,609,611,611,613,613,614,616,616,618,618,620,620,622,622,624,624,626,626,628,629,629,631,632,632,634,634,636,637,637,639,639,640,642,642,644,644,646,646,647,649,649,651,651,653,654,654,656,657,657,659,659,661,662,662,664,665,665,667,667,668,670,670,671,673,673,674,676,676,678,678,679,681,681,683,683,684,685,687,688,688,690,690,691,692,693,694,695,696,697,698,699,700,702,702,705,705,705,708,708,708,711,711,711,713,713,716,716,716,719,719,719,721,721,724,724,724,726,726,728,728,729,731,731,734,734,734,736,736,738,738,740,740,742,742,744,744,746,746,748,748,750,750,752,752,753,754,755,756,758,759,759,760,762,762,764,764,766,766,768,768,769,770,771,772,773,774,777,778,777,778,779,781,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801,802,803,804,805,806,807,811,812,813,639,639,639,814,815,816,817,818,819,820,702,702,702,702,830,831,832,833,834,835,836,837,838,834,835,836,837,838,839,840,841,842,843,844,845,846,847,852,853,854,851,852,853,854,855,3,6,6,9,65,94,115,127,130,142,150,150,181,212,214,229,248,257,282,303,306,308,310,354,359,445,448,460,15,18,80,208,254,260,302,319,323,334,362,373,376,380,381,899,428,475,531,719,904,905,906,907,908,910,910,911]

evolve_level_barrier_array_iii_gaia = [0,16,32,0,16,36,0,16,36,0,7,10,0,7,10,0,18,36,0,20,0,20,0,22,0,30,0,22,0,16,30,0,16,30,0,30,0,30,0,30,0,22,30,21,30,0,24,0,31,0,26,0,28,0,33,0,28,0,30,0,25,30,0,16,30,0,28,30,0,21,30,0,30,0,25,30,0,40,0,37,0,30,40,0,31,0,34,0,38,0,30,0,25,50,0,30,26,0,28,0,30,0,30,0,28,0,0,0,35,35,0,42,50,30,30,0,32,45,33,0,30,0,0,30,0,45,45,0,0,20,0,0,0,30,0,0,0,30,40,0,40,0,0,0,0,0,0,30,55,0,0,0,16,32,0,14,36,0,18,30,0,15,0,20,0,18,0,22,0,0,27,0,10,10,10,10,30,25,0,15,30,0,0,18,0,0,0,18,27,0,30,30,0,30,20,0,0,0,30,0,30,0,0,0,31,0,0,30,0,23,0,0,0,0,0,30,30,0,38,0,33,45,0,25,0,0,0,0,24,0,0,25,0,45,0,0,20,0,30,30,30,0,0,0,0,0,30,55,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16,36,0,16,36,0,16,36,0,18,0,20,0,7,10,0,10,0,14,28,0,14,28,0,20,0,0,22,0,23,0,0,25,0,22,0,40,0,30,0,0,36,0,30,0,0,30,0,0,30,0,30,0,30,0,35,45,0,24,0,26,0,33,0,32,44,0,32,0,42,0,0,0,10,32,0,0,0,0,37,0,35,0,15,37,50,30,18,36,0,26,0,0,20,40,0,30,0,0,0,37,0,0,0,0,32,42,0,0,0,0,40,0,40,0,20,30,0,30,50,0,20,45,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,18,32,0,14,36,0,16,36,0,14,34,0,15,0,10,0,15,30,0,10,0,30,0,30,0,20,0,0,21,0,0,26,0,25,0,30,0,0,28,0,15,0,0,0,38,0,10,34,0,33,0,10,10,10,0,0,24,48,0,20,10,0,34,0,40,0,37,0,0,31,0,10,40,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,36,0,17,36,0,17,36,0,20,0,16,32,0,20,0,30,0,30,0,30,0,30,0,21,32,0,27,0,25,30,0,30,0,31,0,0,25,30,0,25,36,0,0,0,20,30,0,22,30,0,30,0,30,0,0,29,40,0,35,0,0,34,0,39,0,0,34,0,37,0,37,0,36,0,30,0,30,0,32,41,0,32,41,0,35,0,35,47,0,34,0,0,30,0,39,0,40,0,0,36,0,40,0,38,49,0,39,50,0,42,0,41,50,0,38,48,0,37,0,0,30,0,0,50,0,0,43,0,52,0,0,54,0,54,0,0,0,50,64,0,59,0,0,0,0,0,0,0,0,0,0,0,0,0,16,36,0,16,36,0,16,36,0,20,0,17,35,0,9,12,0,35,0,19,38,0,32,0,32,0,0,25,0,35,50,0,30,0,30,0,30,0,39,0,48,0,37,0,30,0,39,0,39,0,0,0,0,0,40,50,0,0,30,0,30,0,37,0,48,0,0,0,0,0,0,0,20,20,0,0,0,30,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,19,19,19,19,38,38,38,38,38,0,0,0,0,0,0,0,0,0,0,0,0,0,30,3,30,30,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34,0,0,40,0,0]

doubles_set_emerald = {261,262,263,264,265,266,267,268,269,270,271,272,335,770,771,772,773,774,775,776,777,778,779,780,781,782,783,784,785,786,787,788,789,790,791,792,793,794,795,796,797,798,799,800,801}


#these trainers currently cause glitches when made double
double_not_set_gaia ={[188,217,224,224,217,255]}


def calc_iii(em, double_bool, double_all_bool, scale_bool, custom_offset, gen_number):
	#current integer byte-offset for TRdata
	#TRdata, Emerald starts from 0x310058 = 3211352, TRPoke 0x30B62C = 3192364
	
	#default values
	
	#Emerald
	if(gen_number == 3.2):
		trainer_pointer = 3211352
		pokemon_pointer =  3192364
		max_trainers = 854
		evolve_array_iii = evolve_array_iii_default
		evolve_level_barrier_array_iii = evolve_array_iii_default
	#FireRed
	elif(gen_number == 3.1):
		trainer_pointer = 3211352
		pokemon_pointer =  3192364
		max_trainers = 854
		evolve_array_iii = evolve_array_iii_default
		evolve_level_barrier_array_iii = evolve_array_iii_default
	#Gaia
	elif(gen_number == 3.11):
		trainer_pointer = 2353904 #0x23EAF0
		pokemon_pointer =  9225576
		evolve_array_iii = evolve_array_iii_gaia
		evolve_level_barrier_array_iii = evolve_array_iii_gaia
	
	#set custom offset if entered
	if(custom_offset != 0):
		#Don't need the pokemon_pointer, Trdata has the pointers anyway
		trainer_pointer = custom_offset
	
	trainer_number = 1
	
	temp_trainer_pointer = trainer_pointer
	back_bool = True
	
	#find the first TrData endflag (08). Assume that the given address is close the true start of the data
	while True:
		#if offset + 39 is the endflag and the following byte makes sense for the first of the next data (is at most 3
		if(em[trainer_pointer] <= 3 and em[trainer_pointer + 39] == 8 and em[trainer_pointer + 40] <= 3):
			break
		#jump back one
		elif(back_bool and trainer_pointer != 0):
			trainer_pointer += 1
		#if got to start of file, go back to where we started and search forwards
		elif(back_bool and trainer_pointer == 0):
			back_bool = False
			trainer_pointer = temp_trainer_pointer
		#otherwise, parse forwards
		else:
			trainer_pointer -= 1
			
	#Now we know with reasonable certainty that we are pointing to the start of Trdata.
	
	
	max_level_array = [50]
	
	level_array = []
	
	#iterate over trainers
	while True:
		#get the number of Pokemon the trainer has
		number_pokemon = em[trainer_pointer + 32]
	
		#Induce Double Battles as per options
		
		#Major trainers
		if(double_bool and trainer_number in doubles_set_emerald and number_pokemon >= 2):
			#don't modify if already set to double battle
			if(em[trainer_pointer + 24]%2 != 1):
				em[trainer_pointer + 24] += 1
		#Anyone with enough Pokemon
		if(double_all_bool and number_pokemon >= 2):
			if(em[trainer_pointer + 24]%2 != 1):
				if(gen_number != 3.11):
					em[trainer_pointer + 24] += 1
				#avoid glitches in Gaia
				elif(not([em[trainer_pointer + 4], em[trainer_pointer + 5], em[trainer_pointer + 6], em[trainer_pointer + 7], em[trainer_pointer + 8], em[trainer_pointer + 9]] in double_not_set_gaia)):
					em[trainer_pointer + 24] += 1
		
		if(scale_bool):
			#Do the Pokemon have hold items? Custom moves?
			extra_type = em[trainer_pointer]
			
			#none or custom hold items but not moves
			if(extra_type == 0 or extra_type == 2):
				pokemon_length = 8
			#custom moves but no items
			elif(extra_type == 1):
				pokemon_length = 14
			elif(extra_type == 3):
			#hold items and custom moves
				pokemon_length = 16
			else:
				print("Trainer data error - incorrect value or incorrect pointer")
			
			
			
			#get the pointer to the trainer's first Pokemon (to check against iterated value)
			t_pokemon_pointer = em[trainer_pointer + 36] + 256*em[trainer_pointer + 37] + 65536*em[trainer_pointer + 38]
			
			next_trainer_pointer = em[trainer_pointer + 36 + 40] + 256*em[trainer_pointer + 37 + 40] + 65536*em[trainer_pointer + 38 + 40]
			
			allocated_team_length = next_trainer_pointer - t_pokemon_pointer
			
			allocated_pokemon_length = allocated_team_length/number_pokemon
			
			if(allocated_pokemon_length.is_integer()):
				if(allocated_pokemon_length != pokemon_length):
					if(allocated_pokemon_length <= 0 or allocated_pokemon_length > 9):
						print("Pointers are skipping around, will not be able to conduct double check")
					else:
						print("Correcting length from", pokemon_length, "to", allocated_pokemon_length)
						pokemon_length = int(allocated_pokemon_length)
			else:
				print("Does not work")
			
			if(t_pokemon_pointer != pokemon_pointer):
				#print("calculated value is ", t_pokemon_pointer - pokemon_pointer, "less than t_pokemon_pointer")
				pokemon_pointer = t_pokemon_pointer
			
			
			#iterate over that trainer's Pokemon
			while True:
				
				#get level
				level = em[pokemon_pointer + 2]
				#use level * (1 + level/50) = (level + (level^2/50)) = (50 * level + level ^2)/50. Level 10 has (500 + 100)/50 = 600/50 = 60/5 = 12, level 20 has 20*1.4 = 28, level 30 has 30*1.6 = 48, level 40 has 40*1.8 = 72, 50*2 = 100
				
				#final check for incorrect values. either level that is too high or too low, or the after-level spot is not 0. The only thing the latter seems to have been causing was turning Roselias into Spheals and Dusclops into Glalies.
				if(level <= 4 or level >= 79 or em[pokemon_pointer + 2 + 1] != 0):
					print("Found level of", level, "at", pokemon_pointer)
					print(trainer_number)
					
					#Some trainers seem to have allocated space different than expected. If this is the case for the last Pokemon of a trainer, it does not matter, it will be caught by the pointer of the next trainer
					if(pokemon_length == 14):
						#Check the position if length should have been 16
						level = em[pokemon_pointer + 2 + 2]
						if((level > 4 or level < 79) and em[pokemon_pointer + 2 + 2 + 1] == 0):
							#print("Found a 16 that was encoded as 14")
							pokemon_pointer += 2
						#check if length 8 works
						else:
							level = em[pokemon_pointer + 2 - 6]
							if((level > 4 or level < 79) and em[pokemon_pointer + 2 - 6 + 1] == 0):
								#print("Found an 8 that was encoded as 14")
								pokemon_pointer -= 6
								
					#check for encoded-as-16 that is incorrect
					elif(pokemon_length == 16):
						#check if 14 works
						level = em[pokemon_pointer + 2 - 2]
						if((level > 4 or level < 79) and em[pokemon_pointer + 2 - 2 + 1] == 0):
							#print("Found a 14 that was encoded as 16")
							pokemon_pointer -= 2
						
						#otherwise check if 8 works
						else:
							level = em[pokemon_pointer + 2 - 8]
							if((level > 4 or level < 79) and em[pokemon_pointer + 2 - 8 + 1] == 0):
								#print("Found an 8 that was encoded as 16")
								pokemon_pointer -= 8
								
					#check for encoded-as-8 that is incorrect
					else:
						#check if 14 works (check this first, in this case, if 14 is also wrong it will be the low EV value, which is rarely if ever in the level range, while if 16 is wrong it will be the low index value, which is often in the level range
						level = em[pokemon_pointer + 2 + 6]
						if((level > 4 or level < 79) and em[pokemon_pointer + 2 + 6 + 1] == 0):
							#print("Found a 14 that was encoded as 8")
							pokemon_pointer += 6
						
						#otherwise check if 16 works
						else:
							level = em[pokemon_pointer + 2 + 8]
							if((level > 4 or level < 79) and em[pokemon_pointer + 2 + 8 + 1] == 0):
								#print("Found a 16 that was encoded as 8")
								pokemon_pointer += 8
						
							
							
				#computes an estimate of average highest trainer level
				if(level >= max_level_array[0] and level <= 100):
					max_level_array[0] = level
					max_level_array.append(level)
				
				#record pointer to current level
				level_array.append(pokemon_pointer)
				
				#decrement party count of current trainer
				number_pokemon -= 1
				
				#checks if finished with current trainer, if so, break. If not, everything is set up for next iteration
				if(number_pokemon == 0):
					break
				else:
					pokemon_pointer += pokemon_length
					
			
				
		trainer_pointer += 40 #0x28
		trainer_number += 1
		
		
		#since each trainer-data has an end flag of 0x08, we just stop when the current trainer pointer + 39 is not 0x08
		#Some hacks seems to have 0x02 and 0x09 end flags as well.
		
		
			
		if(em[trainer_pointer + 39] != 2 and em[trainer_pointer + 39] != 8 and em[trainer_pointer + 39] != 9):
			print("First non-end flag at", trainer_pointer + 39)
			print(trainer_number, "trainers")
			break
			
	
	#create curve:
	#The level that will the first level certainly mapped to 100
	print("Min max level is", max_level_array[1])
	print("Max level is", max_level_array[0])
	
	level_to_100 = 0
	
	for x in max_level_array:
		level_to_100 += x
		
	level_to_100 = level_to_100/len(max_level_array)
	
	
	#get the median	
	lenmaxarr = len(max_level_array)
	
	if(lenmaxarr % 2 == 0):
		medmaxarr = (max_level_array[int(lenmaxarr/2)] + max_level_array[int(lenmaxarr/2 - 1)])/2
	else:
		medmaxarr = max_level_array[int((lenmaxarr - 1)/2)]
	
	
	
	level_to_100 = (level_to_100 + medmaxarr)/2
	
	#avoid divide by zero, in this case rescaling is minimal anyway
	if(level_to_100 == 100):
		level_to_100 = 99
	
	curve_exponent = 0.5
	
	curve_divisor = level_to_100**(1+curve_exponent)/(100 - level_to_100)
	
	print('Mapping', level_to_100, 'to 100.', 'Curve divisor is', curve_divisor)
	
	#new while loop, goes through every Pokemon
	
	print(len(level_array))
	
	modify_count = [0,0]
	
	for pointer in level_array:
		
		#getlevel
		level = em[pointer + 2]
		
		#function adds to level L (L^(curve_exponent))/(curve_divisor)*100% of L
		level = level*(1 + (level**curve_exponent)/curve_divisor)
		level = min(round(level), 100)
		
	
	
				
		#If the Pokemon should be evolved, evolve it. Will evolve any unevolved Pokemon that is 5 or more levels above the minimum level
		low_digits = em[pointer + 4]
		high_digits = em[pointer + 5]
		
		index = low_digits + 256*high_digits

		#If the Pokemon is past the level it evolves at by level-up
		try:	
			if(level >= evolve_level_barrier_array_iii[index]):
				new_index = evolve_array_iii[index]
				if(new_index != index):
					
					#convert back to hex pairs
					low_digits = new_index%256
					high_digits = int((new_index - low_digits)/256)
					
					#write
					em[pointer + 4] = low_digits
					em[pointer + 5] = high_digits
					modify_count[0] += 1
				else:
					modify_count[1] += 1
			else:
				modify_count[1] += 1
			#write level now, so that if the index doesn't make sense, we don't write anything
			em[pointer + 2] = level
		
		except:
			print("Error at ",pointer)
			
	print("Evolved", modify_count[0], "out of", modify_count[0] + modify_count[1], "Pokemon")
		
	return(em)
	
def get_files_gen_iii():

	#for Emerald, modify .gba directly
	
	#get hex file locations:
	rom_location = askopenfilename(filetypes = (("Select Emerald GBA file", "*.*"), (".GBA", "*.gba")))
	
	
	rom = bytearray()
	
	#get the data
	with open(rom_location, 'rb') as f:
		rom_bin = f.read()
	
	
	#convert the binary data into bytearrays. each index is one hex-pair
	rom = bytearray(rom_bin)
	
	return(rom, rom_location)